<script>
  // --- Realer Checkout Ã¼ber unsere Express-API ---
  async function realCheckout() {
    try {
      const cart = {
        items: [
          { name: "ðŸ  Hausbesuch", price: 39 },
          { name: "â¤ï¸ Herz & Stoffwechsel", price: 79 }
        ],
        city: "ZÃ¼rich",
        slot: "07:00 â€“ 09:00"
      };
      const res = await fetch('/api/checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(cart)
      });
      const data = await res.json();
      if (data.url) {
        location.href = data.url; // Stripe Payment Link ODER Stripe Checkout
      } else {
        alert('Checkout-Fehler: ' + (data.error || 'unbekannt'));
      }
    } catch (e) {
      alert('Checkout-Fehler: ' + e.message);
    }
  }

  // vorhandenen Button anbinden
  window.addEventListener('DOMContentLoaded', () => {
    const payBtn = document.getElementById('payBtn');
    if (payBtn) {
      payBtn.addEventListener('click', (e) => {
        e.preventDefault();
        realCheckout();
      });
    }
  });
</script>
